# üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É –°–º–∞—á–Ω–æ.AI

```
–°–º–∞—á–Ω–æ.AI/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ index.js              # –û—Å–Ω–æ–≤–Ω–∏–π —Ñ–∞–π–ª Telegram-–±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ config.js             # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Ç–∞ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.js       # –ö–ª–∞—Å –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ Supabase
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schema.sql        # SQL —Å—Ö–µ–º–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ migrate.js        # –°–∫—Ä–∏–ø—Ç –º—ñ–≥—Ä–∞—Ü—ñ—ó (–¥–æ–ø–æ–º—ñ–∂–Ω–∏–π)
‚îÇ   ‚îî‚îÄ‚îÄ services/
‚îÇ       ‚îú‚îÄ‚îÄ ai.js             # OpenAI —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è (DALL¬∑E 3 + GPT-4o-mini)
‚îÇ       ‚îú‚îÄ‚îÄ payment.js        # –ü–ª–∞—Ç—ñ–∂–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ (WayForPay)
‚îÇ       ‚îî‚îÄ‚îÄ storage.js        # –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ (Supabase Storage)
‚îú‚îÄ‚îÄ package.json              # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —Ç–∞ —Å–∫—Ä–∏–ø—Ç–∏
‚îú‚îÄ‚îÄ .env.example              # –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
‚îú‚îÄ‚îÄ .gitignore               # Git ignore –ø—Ä–∞–≤–∏–ª–∞
‚îú‚îÄ‚îÄ .nvmrc                    # –í–µ—Ä—Å—ñ—è Node.js
‚îú‚îÄ‚îÄ README.md                 # –û—Å–Ω–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ SETUP.md                  # –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
‚îî‚îÄ‚îÄ PROJECT_STRUCTURE.md      # –¶–µ–π —Ñ–∞–π–ª
```

## –û—Å–Ω–æ–≤–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

### ü§ñ Telegram Bot (`src/index.js`)

- –û–±—Ä–æ–±–∫–∞ –∫–æ–º–∞–Ω–¥ (`/start`, `/my_creatives`, `/stats`, `/broadcast`)
- –û–±—Ä–æ–±–∫–∞ —Ñ–æ—Ç–æ –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- –û–±—Ä–æ–±–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ AI —Å–µ—Ä–≤—ñ—Å–∞–º–∏
- –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–µ—Ç–∏–∑–∞—Ü—ñ—ó

### üß† AI Service (`src/services/ai.js`)

- **generateImage()** - –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–æ–±—Ä–∞–∂–µ–Ω—å —á–µ—Ä–µ–∑ DALL¬∑E 3
- **generateCaption()** - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—ñ–¥–ø–∏—Å—ñ–≤ —á–µ—Ä–µ–∑ GPT-4o-mini
- **analyzeImage()** - –ê–Ω–∞–ª—ñ–∑ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏—Ö —Ñ–æ—Ç–æ

### üíæ Database (`src/db/database.js`)

- –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫—Ä–µ–∞—Ç–∏–≤—ñ–≤
- –û–±—Ä–æ–±–∫–∞ –ø–ª–∞—Ç–µ–∂—ñ–≤
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è –∞–¥–º—ñ–Ω—ñ–≤

### üí≥ Payment Service (`src/services/payment.js`)

- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–ª–∞—Ç–µ–∂—ñ–≤ —á–µ—Ä–µ–∑ WayForPay API
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ–¥–ø–∏—Å—ñ–≤
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ Stripe (–∑–∞–≥–ª—É—à–∫–∞)

### üì¶ Storage Service (`src/services/storage.js`)

- –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–æ—Ç–æ –∑ Telegram
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Supabase Storage

### üåê Webhook Server (—ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ –≤ `src/index.js`)

- –û–±—Ä–æ–±–∫–∞ callback –≤—ñ–¥ WayForPay
- –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—ñ–≤ –ø–ª–∞—Ç–µ–∂—ñ–≤
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –ø—Ä–æ —É—Å–ø—ñ—à–Ω—É –æ–ø–ª–∞—Ç—É

## –ü–æ—Ç—ñ–∫ —Ä–æ–±–æ—Ç–∏

### –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∫—Ä–µ–∞—Ç–∏–≤—É –∑ —Ñ–æ—Ç–æ:

1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞–¥—Å–∏–ª–∞—î —Ñ–æ—Ç–æ ‚Üí `bot.on('photo')`
2. –§–æ—Ç–æ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ Supabase Storage
3. AI –∞–Ω–∞–ª—ñ–∑—É—î —Ñ–æ—Ç–æ ‚Üí `aiService.analyzeImage()`
4. –ì–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –ø—Ä–æ–º–ø—Ç –¥–ª—è DALL¬∑E 3
5. –°—Ç–≤–æ—Ä—é—é—Ç—å—Å—è 1-2 –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è ‚Üí `aiService.generateImage()`
6. –ì–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –ø—ñ–¥–ø–∏—Å ‚Üí `aiService.generateCaption()`
7. –ü–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è –ª—ñ–º—ñ—Ç –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏—Ö –≥–µ–Ω–µ—Ä–∞—Ü—ñ–π
8. –Ø–∫—â–æ —î –ª—ñ–º—ñ—Ç - –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è, —ñ–Ω–∞–∫—à–µ - –∑–∞–ø–∏—Ç –Ω–∞ –æ–ø–ª–∞—Ç—É
9. –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –ë–î —Ç–∞ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—é—Ç—å—Å—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É

### –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∫—Ä–µ–∞—Ç–∏–≤—É –∑ —Ç–µ–∫—Å—Ç—É:

1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞–¥—Å–∏–ª–∞—î —Ç–µ–∫—Å—Ç ‚Üí `bot.on('text')`
2. –ì–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ç–µ–∫—Å—Ç—É
3. –ì–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –ø—ñ–¥–ø–∏—Å
4. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª—ñ–º—ñ—Ç—É —Ç–∞ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è

### –ü–ª–∞—Ç—ñ–∂:

1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–∏—á–µ—Ä–ø–∞–≤ –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω—ñ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó
2. –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –ø–ª–∞—Ç—ñ–∂ —á–µ—Ä–µ–∑ WayForPay ‚Üí `paymentService.createPayment()`
3. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –æ–ø–ª–∞—Ç–∏
4. WayForPay –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î webhook ‚Üí `src/index.js` (webhook endpoint)
5. –°—Ç–∞—Ç—É—Å –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –≤ –ë–î
6. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –æ—Ç—Ä–∏–º—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ —É—Å–ø—ñ—à–Ω—É –æ–ø–ª–∞—Ç—É

## –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

### –¢–∞–±–ª–∏—Ü—ñ:

- **users** - –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –±–æ—Ç–∞
- **creatives** - –°—Ç–≤–æ—Ä–µ–Ω—ñ –∫—Ä–µ–∞—Ç–∏–≤–∏
- **payments** - –Ü—Å—Ç–æ—Ä—ñ—è –ø–ª–∞—Ç–µ–∂—ñ–≤

### Storage:

- **creatives** bucket - –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ñ–æ—Ç–æ —Ç–∞ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏—Ö –∑–æ–±—Ä–∞–∂–µ–Ω—å

## API —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó

- **Telegram Bot API** - –ß–µ—Ä–µ–∑ Telegraf.js
- **OpenAI API** - DALL¬∑E 3 —Ç–∞ GPT-4o-mini
- **Supabase** - PostgreSQL + Storage
- **WayForPay API** - –ü–ª–∞—Ç—ñ–∂–Ω–∞ —Å–∏—Å—Ç–µ–º–∞

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

–í—Å—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ `.env` —Ñ–∞–π–ª—ñ. –î–∏–≤. `SETUP.md` –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## –î–µ–ø–ª–æ–π

–ü—Ä–æ—î–∫—Ç –≥–æ—Ç–æ–≤–∏–π –¥–æ –¥–µ–ø–ª–æ—é –Ω–∞:

- Railway
- Render
- Fly.io
- Vercel (–∑ –æ–±–º–µ–∂–µ–Ω–Ω—è–º–∏)

–î–∏–≤. `README.md` —Ç–∞ `SETUP.md` –¥–ª—è —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π.
