# üöÇ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Railway –¥–ª—è –°–º–∞—á–Ω–æ.AI

–Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ –¥–µ–ø–ª–æ—é –±–æ—Ç–∞ —Ç–∞ webhook —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ Railway.

## üìã –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

1. –ê–∫–∫–∞—É–Ω—Ç –Ω–∞ [railway.app](https://railway.app)
2. GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –∑ –∫–æ–¥–æ–º –ø—Ä–æ—î–∫—Ç—É
3. –í—Å—ñ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è –≥–æ—Ç–æ–≤—ñ

## üöÄ –ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ—î–∫—Ç—É –Ω–∞ Railway

1. –£–≤—ñ–π–¥—ñ—Ç—å –Ω–∞ [railway.app](https://railway.app)
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"New Project"**
3. –û–±–µ—Ä—ñ—Ç—å **"Deploy from GitHub repo"**
4. –í–∏–±–µ—Ä—ñ—Ç—å –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π –∑ –ø—Ä–æ—î–∫—Ç–æ–º
5. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∏—Ç—å Node.js –ø—Ä–æ—î–∫—Ç

## ‚öôÔ∏è –ö—Ä–æ–∫ 2: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö –æ—Ç–æ—á–µ–Ω–Ω—è

–ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ **Variables** —Ç–∞ –¥–æ–¥–∞–π—Ç–µ –≤—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∑–º—ñ–Ω–Ω—ñ:

### –û–±–æ–≤'—è–∑–∫–æ–≤—ñ –∑–º—ñ–Ω–Ω—ñ:

```env
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
OPENAI_API_KEY=your_openai_api_key
SUPABASE_URL=your_supabase_url
SUPABASE_KEY=your_supabase_key
WAYFORPAY_MERCHANT_ACCOUNT=your_merchant_account
WAYFORPAY_SECRET_KEY=your_secret_key
MERCHANT_DOMAIN_NAME=your-domain.com
PAYMENT_AMOUNT=30
PAYMENT_CURRENCY=UAH
ADMIN_USER_IDS=123456789
```

**‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û –¥–ª—è WayForPay:**

- `WAYFORPAY_MERCHANT_ACCOUNT` - —Ü–µ –≤–∞—à merchant account (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `t_me_6d523`)
- `MERCHANT_DOMAIN_NAME` - —Ü–µ **–î–û–ú–ï–ù**, –∞ –Ω–µ merchant account! (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `smachnoai-production.up.railway.app`)
- `WAYFORPAY_SECRET_KEY` - —Å–µ–∫—Ä–µ—Ç–Ω–∏–π –∫–ª—é—á –∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –º–∞–≥–∞–∑–∏–Ω—É WayForPay (–∑–∞–∑–≤–∏—á–∞–π 40 —Å–∏–º–≤–æ–ª—ñ–≤)

### –í–∞–∂–ª–∏–≤–æ –¥–ª—è webhook:

```env
APP_URL=https://your-app-name.up.railway.app
PORT=3000
```

**‚ö†Ô∏è –í–∞–∂–ª–∏–≤–æ:** Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –Ω–∞–¥–∞—î –∑–º—ñ–Ω–Ω—É `PORT`, –∞–ª–µ —Ç–∞–∫–æ–∂ –º–æ–∂–Ω–∞ –≤–∫–∞–∑–∞—Ç–∏ —Å–≤—ñ–π. `APP_URL` –º–∞—î –±—É—Ç–∏ URL –≤–∞—à–æ–≥–æ Railway –¥–æ–¥–∞—Ç–∫—É.

## üåê –ö—Ä–æ–∫ 3: –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—É–±–ª—ñ—á–Ω–æ–≥–æ URL

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ **Settings** –≤–∞—à–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É
2. –£–≤—ñ–º–∫–Ω—ñ—Ç—å **"Generate Domain"** –∞–±–æ –Ω–∞–ª–∞—à—Ç—É–π—Ç–µ –≤–ª–∞—Å–Ω–∏–π –¥–æ–º–µ–Ω
3. –°–∫–æ–ø—ñ—é–π—Ç–µ –æ—Ç—Ä–∏–º–∞–Ω–∏–π URL (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `https://your-app-name.up.railway.app`)
4. –û–Ω–æ–≤—ñ—Ç—å –∑–º—ñ–Ω–Ω—É `APP_URL` —Ü–∏–º –∑–Ω–∞—á–µ–Ω–Ω—è–º

## üîó –ö—Ä–æ–∫ 4: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è WayForPay webhook

1. –£–≤—ñ–π–¥—ñ—Ç—å –≤ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å WayForPay
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–∞–≥–∞–∑–∏–Ω—É ‚Üí —Ä–æ–∑–¥—ñ–ª **"–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è"**

### Service URL (–æ–±–æ–≤'—è–∑–∫–æ–≤–æ):

–í–∫–∞–∂—ñ—Ç—å –≤ –ø–æ–ª—ñ **"Service URL"**:

```
https://your-app-name.up.railway.app/payment/webhook
```

–¶–µ URL –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –ø—Ä–æ —Å—Ç–∞—Ç—É—Å –ø–ª–∞—Ç–µ–∂—ñ–≤.

### Return URL (–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç–∞):

–í —Ä–æ–∑–¥—ñ–ª—ñ **"–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç–∞"** –≤–∫–∞–∂—ñ—Ç—å:

**–ü—Ä–∏ —É—Å–ø—ñ—à–Ω—ñ–π –æ–ø–ª–∞—Ç—ñ (approvedUrl):**

```
https://your-app-name.up.railway.app/payment/callback
```

**–ü—Ä–∏ –Ω–µ—É—Å–ø—ñ—à–Ω—ñ–π –æ–ø–ª–∞—Ç—ñ (declinedUrl):**

```
https://your-app-name.up.railway.app/payment/callback
```

(–ú–æ–∂–Ω–∞ –≤–∫–∞–∑–∞—Ç–∏ —Ç–æ–π —Å–∞–º–∏–π URL, –±–æ—Ç —Ä–æ–∑–ø—ñ–∑–Ω–∞—î —Å—Ç–∞—Ç—É—Å)

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** –ü–æ–ª–µ "SendPulse URL" –º–æ–∂–Ω–∞ –∑–∞–ª–∏—à–∏—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ–º (—Ü–µ –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ).

5. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"–ó–±–µ—Ä–µ–≥—Ç–∏"**

## üì¶ –ö—Ä–æ–∫ 5: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Railway

### Build Settings (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ):

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∏—Ç—å:

- **Build Command:** `npm install`
- **Start Command:** `npm start`

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –≤—Ä—É—á–Ω—É:

- **Build Command:** `npm install`
- **Start Command:** `node src/index.js`

### Port Settings:

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∏—Ç—å –ø–æ—Ä—Ç –∑ –∑–º—ñ–Ω–Ω–æ—ó `PORT` –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î –ø–æ—Ä—Ç –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º.

## ‚úÖ –ö—Ä–æ–∫ 6: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–±–æ—Ç–∏

1. –ü—ñ—Å–ª—è –¥–µ–ø–ª–æ—é –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –≤ Railway
2. –ú–∞—î –∑'—è–≤–∏—Ç–∏—Å—è:

   ```
   ü§ñ –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞ —Ç–∞ webhook —Å–µ—Ä–≤–µ—Ä–∞...
   ‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ!
   üåê Webhook server –∑–∞–ø—É—â–µ–Ω–æ –Ω–∞ –ø–æ—Ä—Ç—É 3000
   ```

3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ health check:

   ```
   https://your-app-name.up.railway.app/health
   ```

   –ú–∞—î –ø–æ–≤–µ—Ä–Ω—É—Ç–∏: `{"status":"ok","timestamp":"..."}`

4. –ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram

## üîç –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è:

- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –≤—Å—ñ –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –≤ Railway Dashboard
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ `TELEGRAM_BOT_TOKEN` –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π

### Webhook –Ω–µ –ø—Ä–∞—Ü—é—î:

- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ `APP_URL` –≤–∫–∞–∑—É—î –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π Railway URL
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ URL –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—ñ webhook

### WayForPay –Ω–µ –Ω–∞–¥—Å–∏–ª–∞—î webhook:

- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ Service URL –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –≤ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—ñ WayForPay
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ URL –¥–æ—Å—Ç—É–ø–Ω–∏–π (–º–æ–∂–Ω–∞ –ø—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —á–µ—Ä–µ–∑ curl –∞–±–æ Postman)
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ Railway –ø—Ä–∏ —Å–ø—Ä–æ–±—ñ –æ–ø–ª–∞—Ç–∏

## üìù –î–æ–¥–∞—Ç–∫–æ–≤—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### Custom Domain (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ):

1. –í Settings ‚Üí Domains –¥–æ–¥–∞–π—Ç–µ —Å–≤—ñ–π –¥–æ–º–µ–Ω
2. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ DNS –∑–∞–ø–∏—Å–∏ –∑–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è–º–∏ Railway
3. –û–Ω–æ–≤—ñ—Ç—å `APP_URL` –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω

### Environment Variables:

Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î –∑–º—ñ–Ω–Ω—ñ –∑ `.env` —Ñ–∞–π–ª—É, –∞–ª–µ –∫—Ä–∞—â–µ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —ó—Ö –≤—Ä—É—á–Ω—É –≤ –ø–∞–Ω–µ–ª—ñ Railway –¥–ª—è –±–µ–∑–ø–µ–∫–∏.

## üéØ –ü—ñ–¥—Å—É–º–æ–∫

–ü—ñ—Å–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:

- ‚úÖ –ë–æ—Ç –ø—Ä–∞—Ü—é—î –Ω–∞ Railway
- ‚úÖ Webhook —Å–µ—Ä–≤–µ—Ä –æ–±—Ä–æ–±–ª—è—î –ø–ª–∞—Ç–µ–∂—ñ
- ‚úÖ WayForPay –Ω–∞–¥—Å–∏–ª–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä
- ‚úÖ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –æ—Ç—Ä–∏–º—É—é—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ —É—Å–ø—ñ—à–Ω—É –æ–ø–ª–∞—Ç—É

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—î —Å–µ—Ä–≤—ñ—Å –ø—Ä–∏ –∑–º—ñ–Ω–∞—Ö –≤ –∫–æ–¥—ñ, —è–∫—â–æ —É–≤—ñ–º–∫–Ω–µ–Ω–æ GitHub integration.
